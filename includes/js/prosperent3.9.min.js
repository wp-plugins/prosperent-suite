(function() {
	var height = ((jQuery(window).height() < 950) ? 675 : 750);
    tinymce.PluginManager.add("prosperent", function(a, b) {
        a.addButton("prosperent", {
            title: "Prosperent ShortCodes",
            type: "splitbutton",
            onclick: function() {console.log(a.selection.getContent());},
            menu: 
            	[						
		            {
	            	    text: "Link Phrase/Image to a Product",
		                onclick: function() {
		                    a.windowManager.open({
		                        file: b + "/../views/prosperlinker/autoLink.php",
		                        width: 950,
		                        height: height
		                    })
		                }
		            },
		            {
		                text: "Insert Products",
		                hidden: !prosperSuiteVars.prosperInsert,
		                onclick: function() {
		                    a.windowManager.open({
		                        file: b + "/../views/prosperinsert/productInsert.php",
		                        width: 950,
		                        height: height
		                    })
		                }
		            }, 
		            {
		                text: "Edit ContentInsert Products",
		                hidden: !prosperSuiteVars.prosperInsert,
		                onclick: function() {
		                    a.windowManager.open({
		                        file: b + "/../views/prosperinsert/contentInsert.php",
		                        width: 950,
                                height: height,
		                    })
		                }
				},
				{
					text: "Insert a Product Search Bar",
					onclick: function() {
						a.windowManager.open({
							file: b +
							"/../views/prospersearch/prosperSearch.php",
							width: 495,
							height: 200
						})
					}
				}, 
				{
					text: "Insert a Shop",
            	    hidden: prosperSuiteVars.currentScreen == 'post',
					onclick: function() {
						a.execCommand("mceInsertContent", !1, "[prosper_store][/prosper_store]")
					}				
				}
		    ]
        })
    })
})();